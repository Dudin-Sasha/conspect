
Глава 3. Unity - универсальная платформа для XR-разработки Unity утвердилась в качестве основного инструмента для XR-разработки, благодаря своей модульности, кроссплатформенности и активному сообществу. 
  
 Архитектура Unity XR Foundation (XR Foundation Toolkit, XRFT)
**XRFT** - это низкоуровневый абстрактный слой, который служит «переводчиком» между Unity и любым XR-устройством.

XR plugin manager - провайдер (Oculus XR Plugin, AR core XR Plugin)

подсистемы ввода - XR input subsystem

**Ключевые понятия:** 
- **Device**: физическое устройство(левый\правый контроллер, шлем)
- **Feature**: Конкретный тип ввода(бинарная кнопка, аналоговый стик, трекпоинт, позиция в пространстве )
- **Action**: Пользовательское имя для комбинации входных данных(например схватить, телепортироваться) настраиваемое в Input System

**Пространственное отслеживание (XR Tracking Subsystem)**

- **Отслеживает**: позицию и поворот шлема(HMD) и каждого контроллера
- **Как предоставляет данные**: Через InputDevices или напрямую из  подсистемы. Unity автоматически применяет эти данные к  объектам XR Origin (ранее XR Rig) — корневой точке камеры  пользователя в сцене.  
- **Важность**: Корректная работа этой подсистемы предотвращает  рассогласование между движением головы и виртуальным миром —  главную причину киберболезни.

Рендеринг XR - требует рендерить сцены дважды для каждого глаза, с минимальной задержкой и высоким FPS

**Single-Pass или Multi-Pass** 
- Multy-pass: упрощенный но более ресурсоёмкий метод движок рендерит всю сцену полностью для левого, потом для правого глаза => каждый объект отрисовывается дважды и дает сильную нагрузку на GPU
- Single-Pass: современный и эффективный метод. Сцена рендерится один раз, но шейдеры получают данные сразу о двух  точек обзора.
	- Главное преимущество: Сокращение нагрузки на GPU до 30-50% по сравнению с multy-pass
	- Главные минусы: не все шейдеры поддерживают Single-Pass

Оптимизация для мобильных и автономных устройств 
1) Обязательно Universal Render Pipline(URP) Он легковесный и оптимизированный,
2) Жесткий контроль ресурсов, запекание текстур, теней и света, легковесные текстуры

Оптимизация стационарных систем (PCVR, PS VR):
- Выбор пайплайна High Defenition Render Pipline (HDRP) -URP для сбалансированной производительности
- Deferred Rendering: Отложенный рендеринг в (RenderPipline) который эффективно работает со множеством источников динамический света
- Фокус на качестве: можно использовать динамические тени в реальном времени и сглаживание

## 90-120FPS обязательны


